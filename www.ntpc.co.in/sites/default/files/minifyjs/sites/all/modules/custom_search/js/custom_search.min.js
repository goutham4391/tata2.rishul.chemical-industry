(function(e){Drupal.behaviors.custom_search={attach:function(r){if(!Drupal.settings.custom_search.solr){e('form.search-form',r).submit(function(){var t=e(this),s=t.find('input.custom-search-box');if(s.val()!=undefined&&s.val()==''){t.find('input.custom-search-box').addClass('error');return!1};if(t.find('#edit-keys').parents('div.element-invisible').attr('class')=='element-invisible'){t.find('#edit-keys').val(t.find('#edit-or').val());t.find('#edit-or').val('')};return!0})};e('form.search-form').attr('target',Drupal.settings.custom_search.form_target);e('form.search-form input.custom-search-box',r).bind('click focus',function(t){var a=e(this).parents('form'),s=a.find('fieldset.custom_search-popup');if(s.find('input,select').length&&!s.hasClass('opened')){s.fadeIn().addClass('opened')};t.stopPropagation()});e(document).bind('click focus',function(){e('fieldset.custom_search-popup').hide().removeClass('opened')});e('.custom-search-selector input:checkbox',r).each(function(){var t=e(this);if(t.val()=='c-all'){t.change(function(){e(this).parents('.custom-search-selector').find('input:checkbox[value!=c-all]').attr('checked',!1)})}
else{if(t.val().substr(0,2)=='c-'){t.change(function(){e('.custom-search-selector input:checkbox').each(function(){if(e(this).val().substr(0,2)=='o-'){e(this).attr('checked',!1)}});e(this).parents('.custom-search-selector').find('input:checkbox[value=c-all]').attr('checked',!1)})}
else{t.change(function(){e(this).parents('.custom-search-selector').find('input:checkbox[value!='+t.val()+']').attr('checked',!1)})}}});var t=e('#edit-keys').val();if(t){var c=t.indexOf('type:');if(c!=-1){var a=t.indexOf(' ',c);if(a==-1){a=t.length};var o=t.substring(c+5,a);o=o.split(',');for(var s=0;s<o.length;s++){e('.search-form input:checkbox[value='+o[s]+']').attr('checked',!0)}};var c=t.indexOf('term:');if(c!=-1){var a=t.indexOf(' ',c);if(a==-1){a=t.length};var n=t.substring(c+5,a);n=n.split(',');for(var s=0;s<n.length;s++){e('#edit-term option[value='+n[s]+']').attr('selected',!0)}};var c=t.indexOf('language:');if(c!=1){var a=t.indexOf(' ',c);if(a==-1){a=t.length};var i=t.substring(c+9,a);i=i.split(',');for(var s=0;s<i.length;s++){e('.search-advanced #edit-language-'+i[s]).attr('checked',!0)}}};var u=e('fieldset.custom_search-popup:not(.custom_search-processed)',r).addClass('custom_search-processed');u.click(function(e){e.stopPropagation()});u.append('<a class="custom_search-popup-close" href="#">'+Drupal.t('Close')+'</a>');e('a.custom_search-popup-close').click(function(t){e('fieldset.custom_search-popup.opened').hide().removeClass('opened');t.preventDefault()})}}})(jQuery);